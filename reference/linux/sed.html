<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sed: Stream Editor :: Javowiec.pl</title>
    <link rel="canonical" href="https://javowiec.pl/reference/linux/sed.html">
    <meta name="generator" content="Antora 3.1.10">
<link rel="stylesheet" href="../../_/css/site.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="stylesheet" href="../../_/css/doc-extension.css"/>
<link rel="stylesheet" href="../../_/css/header-extension.css"/>
<link rel="stylesheet" href="../../_/css/docsearch-extension.css"/>
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://javowiec.pl">
          <img id="navbar-logo" src="../../_/img/favicon.ico" alt="Logo" />
          <span id="navbar-title">Javowiec.pl</span>
      </a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Projects</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/p-marcin/dev-cheat-sheets" target="_blank">Repository</a>
            <a class="navbar-item" href="https://github.com/p-marcin/dev-cheat-sheets/issues" target="_blank">Issue Tracker</a>
            <hr class="navbar-divider">
            <a class="navbar-item" href="https://github.com/p-marcin/java-dev-vm" target="_blank">Java DEV VM</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="reference" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">DEV Cheat Sheets</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../java/index.html">‚òï Java</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../java/api/lambda-expression.html">Lambda Expression</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../java/api/the-stream-api/the-stream-api.html">The Stream API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../java/api/the-stream-api/parallelism.html">Parallelism</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../java/concepts/concepts.html">Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../java/concepts/microservices.html">Microservices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../java/concepts/reactive-programming.html">Reactive Programming</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spring-framework/index.html">‚òòÔ∏è Spring Framework</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spring-framework/concepts.html">Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spring-framework/spring-boot.html">Spring Boot</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spring-framework/servlet-stack/index.html">Servlet Stack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/servlet-stack/spring-webmvc.html">Spring WebMVC</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/servlet-stack/spring-data-jpa.html">Spring Data JPA</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/servlet-stack/spring-resttemplate.html">Spring RestTemplate</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spring-framework/reactive-stack/index.html">Reactive Stack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/reactive-stack/spring-webflux.html">Spring WebFlux</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/reactive-stack/spring-data-r2dbc.html">Spring Data R2DBC</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spring-framework/spring-security/index.html">Spring Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/spring-security/spring-authorization-server.html">Spring Authorization Server</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/spring-security/spring-resource-server.html">Spring Resource Server</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spring-framework/spring-boot-test/index.html">Spring Boot Test</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/spring-boot-test/spring-webmvc-test.html">Spring WebMVC Test</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/spring-boot-test/spring-data-jpa-test.html">Spring Data JPA Test</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spring-framework/utilities/index.html">Utilities</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/utilities/thymeleaf.html">Thymeleaf</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/utilities/h2-database.html">H2 Database</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/utilities/lombok.html">Lombok</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/utilities/mapstruct.html">MapStruct</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/utilities/spring-boot-devtools.html">Spring Boot DevTools</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-framework/utilities/debug.html">Debugging techniques</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../web/index.html">üï∏Ô∏è Web</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../database/index.html">üõ¢Ô∏è Database</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SQL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../database/postgresql-ha.html">PostgreSQL HA - Bitnami</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../server/index.html">‚öôÔ∏è Server</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../server/open-liberty.html">Open Liberty</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../cloud/index.html"><span class="image"><img src="https://cdn.simpleicons.org/icloud/3693F3" alt="3693F3" width="30"></span> Cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cloud/docker/docker.html"><span class="image"><img src="https://cdn.simpleicons.org/docker/2496ED" alt="2496ED" width="30"></span> Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cloud/kubernetes/kubernetes.html"><span class="image"><img src="https://cdn.simpleicons.org/kubernetes/326CE5" alt="326CE5" width="30"></span> Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cloud/helm/helm.html"><span class="image"><img src="https://cdn.simpleicons.org/helm/0F1689" alt="0F1689" width="30"></span> Helm</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">üñ•Ô∏è Linux</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="coreutils/index.html">Coreutils (file, shell, text manipulation)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jq.html">Jq: JSON Stream Processor</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="sed.html">Sed: Stream Editor</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../asciidoc/index.html">üÖ∞Ô∏è AsciiDoc</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">DEV Cheat Sheets</a></li>
    <li><a href="index.html">üñ•Ô∏è Linux</a></li>
    <li><a href="sed.html">Sed: Stream Editor</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/p-marcin/dev-cheat-sheets/blob/main/docs/modules/linux/pages/sed.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Sed: Stream Editor</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><a class="image" href="https://www.gnu.org/software/sed/manual/sed.html" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Sed%20Docs-2088E9?logo=quickLook&amp;logoColor=white" alt="Sed%20Docs 2088E9?logo=quickLook&amp;logoColor=white"></a></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A stream editor is used to perform basic text transformations on an input stream (a file or input from a pipeline).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_s_command"><a class="anchor" href="#_the_s_command"></a>The s Command</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">Multiple script expressions</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ echo "test" | sed "s/te/ab/;s/st/cd/" <i class="conum" data-value="1"></i><b>(1)</b>
abcd

$ echo "test" | sed -e "s/te/ab/" -e "s/st/cd/" <i class="conum" data-value="1"></i><b>(1)</b>
abcd</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>s/regexp/replacement/[flags]</code>: the <code>s</code> command attempts to match the pattern space against the supplied regular expression <code>regexp</code>; if the match is successful, then that portion of the pattern space which was matched is replaced with <code>replacement</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can change <code>/</code> separator in <code>s///</code> for example to <code>|</code>: <code>s|||</code> if you have many <code>/</code> in the input (e.g. web url).
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you want to escape <code>\</code> character, you need to define it like: <code>\\\</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Reuse matched portion of the pattern space with <code>&amp;</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ echo -e "test1\ntest2" | sed "s/test.*/#&amp;/"
#test1
#test2</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sed_scripts"><a class="anchor" href="#_sed_scripts"></a>Sed Scripts</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">Processing a file with <code>.sed</code> script file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ cat test.txt
test1
test2
test3
test4

$ cat script-file.sed
# Append text after matching line <i class="conum" data-value="1"></i><b>(1)</b>
/^test1$/ { <i class="conum" data-value="2"></i><b>(2)</b>
    a
    a test-from-script-file
    a
}

$ sed -E -i -f script-file.sed test.txt <i class="conum" data-value="3"></i><b>(3)</b> <i class="conum" data-value="4"></i><b>(4)</b> <i class="conum" data-value="5"></i><b>(5)</b>

$ cat test.txt
test1

test-from-script-file

test2
test3
test4</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>#</code> begins a comment; the comment continues until the next newline.
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
if the first two characters of the <code>sed</code> script are <code>#n</code>, then the <code>-n</code> (no-autoprint) option is forced. If you want to put a comment in the first line of your script and that comment begins with the letter <code>n</code> and you do not want this behavior, then be sure to either use a capital <code>N</code>, or place at least one space before the <code>n</code>.
</td>
</tr>
</table>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>^</code> means "starts with" and <code>$</code> means "ends with". You can use one, both, or neither.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>-E</code>: use extended regular expressions rather than basic regular expressions. See <a href="https://www.gnu.org/software/sed/manual/html_node/ERE-syntax.html#ERE-syntax" target="_blank" rel="noopener">Extended regular expressions</a></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>i</code>: edit file in-place. GNU <code>sed</code> does this by creating a temporary file and sending output to this file rather than to the standard output. When the end of the file is reached, the temporary file is renamed to the output file‚Äôs original name.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>-f script-file.sed</code>: add the commands contained in the script file to the set of commands to be run while processing the input. Script file can contain many commands. Multiple script files can be specified with <code>-f</code> option.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Insert text at first line and append text at the last line</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">1 {
    i Beginning of file <i class="conum" data-value="1"></i><b>(1)</b>
}

$ {
    a End of file <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>i</code> inserts text before a line</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>a</code> appends text after a line</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Replace, Substitute and Delete a line</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ cat script-file.sed
/^test1$/c replaced <i class="conum" data-value="1"></i><b>(1)</b>
s/^test2$/test200/ <i class="conum" data-value="2"></i><b>(2)</b>
/^test3$/d <i class="conum" data-value="3"></i><b>(3)</b>

$ sed -E -f script-file.sed test.txt
replaced
test200
test4</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>c</code>: replace (change) lines with text</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>s/regexp/replacement/[flags]</code>: substitute, match the regular expression <code>regexp</code> against the content of the pattern space. If found, replace matched string with <code>replacement</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>d</code>: delete the pattern space</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Delete next line</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ cat script-file.sed
/test1/ {
    n;d <i class="conum" data-value="1"></i><b>(1)</b>
}

$ sed -E -f script-file.sed test.txt
test1
test3
test4</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>n</code>: (next) If auto-print is not disabled, print the pattern space, then, regardless, replace the pattern space with the next line of input. If there is no more input then sed exits without processing any more commands.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Delete three lines</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ cat script-file.sed
/test1/ {
    N;N;d <i class="conum" data-value="1"></i><b>(1)</b>
}

$ sed -E -f script-file.sed test.txt
test4</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>N</code>: Add a newline to the pattern space, then append the next line of input to the pattern space. If there is no more input then sed exits without processing any more commands.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Execute a command from script file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ cat script-file.sed
/test1/e seq -s "," 4 <i class="conum" data-value="1"></i><b>(1)</b>
/test2/e seq 2

$ sed -E -f script-file.sed test.txt
1,2,3,4
test1
1
2
test2
test3
test4</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>e command</code>: executes command and sends its output to the output stream. The command can run across multiple lines, all but the last ending with a back-slash <code>\</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Execute a command from the file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ cat test.txt
test1
test2
test3
test4
TZ="Europe/Warsaw" date +"%Y-%m-%d %H:%M:%S %z"

$ cat script-file.sed
/date/e <i class="conum" data-value="1"></i><b>(1)</b>

$ sed -E -f script-file.sed test.txt
test1
test2
test3
test4
2025-03-06 18:00:00 +0100</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>e</code>: executes the command that is found in pattern space and replaces the pattern space with the output; a trailing newline is suppressed.</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<code>e</code> command is specific to GNU <code>sed</code>, so you must use it with care and only when you are sure that hindering portability is not evil. It is not supported by standard <code>sed</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script src="../../_/js/docsearch.js"></script>
  </body>
</html>
