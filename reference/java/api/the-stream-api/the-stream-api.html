<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>The Stream API :: Javowiec.pl</title>
    <link rel="canonical" href="https://javowiec.pl/reference/java/api/the-stream-api/the-stream-api.html">
    <meta name="generator" content="Antora 3.1.10">
<link rel="stylesheet" href="../../../../_/css/site.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="stylesheet" href="../../../../_/css/doc-extension.css"/>
<link rel="stylesheet" href="../../../../_/css/header-extension.css"/>
<link rel="stylesheet" href="../../../../_/css/docsearch-extension.css"/>
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://javowiec.pl">
          <img id="navbar-logo" src="../../../../_/img/favicon.ico" alt="Logo" />
          <span id="navbar-title">Javowiec.pl</span>
      </a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Projects</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/p-marcin/dev-cheat-sheets" target="_blank">Repository</a>
            <a class="navbar-item" href="https://github.com/p-marcin/dev-cheat-sheets/issues" target="_blank">Issue Tracker</a>
            <hr class="navbar-divider">
            <a class="navbar-item" href="https://github.com/p-marcin/java-dev-vm" target="_blank">Java DEV VM</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="reference" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../../../index.html">DEV Cheat Sheets</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../index.html"><span class="image category-logo"><img src="https://cr.openjdk.org/~jeff/Duke/png/Hips.png" alt="Hips" height="19"></span> Java</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">API</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lambda-expression.html">Lambda Expression</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="the-stream-api.html">The Stream API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="parallelism.html">Parallelism</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../concepts/concepts.html">Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../concepts/microservices.html">Microservices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../concepts/reactive-programming.html">Reactive Programming</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../spring-framework/index.html">‚òòÔ∏è Spring Framework</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../spring-framework/concepts.html">Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../spring-framework/spring-boot.html">Spring Boot</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../spring-framework/servlet-stack/index.html">Servlet Stack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/servlet-stack/spring-webmvc.html">Spring WebMVC</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/servlet-stack/spring-data-jpa.html">Spring Data JPA</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/servlet-stack/spring-resttemplate.html">Spring RestTemplate</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../spring-framework/reactive-stack/index.html">Reactive Stack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/reactive-stack/spring-webflux.html">Spring WebFlux</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/reactive-stack/spring-data-r2dbc.html">Spring Data R2DBC</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../spring-framework/spring-security/index.html">Spring Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/spring-security/spring-authorization-server.html">Spring Authorization Server</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/spring-security/spring-resource-server.html">Spring Resource Server</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../spring-framework/spring-boot-test/index.html">Spring Boot Test</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/spring-boot-test/spring-webmvc-test.html">Spring WebMVC Test</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/spring-boot-test/spring-data-jpa-test.html">Spring Data JPA Test</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../spring-framework/utilities/index.html">Utilities</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/utilities/thymeleaf.html">Thymeleaf</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/utilities/h2-database.html">H2 Database</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/utilities/lombok.html">Lombok</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/utilities/mapstruct.html">MapStruct</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/utilities/spring-boot-devtools.html">Spring Boot DevTools</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../spring-framework/utilities/debug.html">Debugging techniques</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../web/index.html">üï∏Ô∏è Web</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../database/index.html">üõ¢Ô∏è Database</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SQL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../database/postgresql-ha.html">PostgreSQL HA - Bitnami</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../server/index.html">‚öôÔ∏è Server</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../server/open-liberty.html">Open Liberty</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../cloud/index.html"><span class="image category-logo"><img src="https://img.icons8.com/?id=XhUpb0HYruKj&amp;format=png" alt="?id=XhUpb0HYruKj&amp;format=png" height="19"></span> Cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cloud/docker/docker.html"><span class="image category-logo"><img src="https://www.vectorlogo.zone/logos/docker/docker-tile.svg" alt="docker tile" height="19"></span> Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cloud/kubernetes/kubernetes.html"><span class="image category-logo"><img src="https://www.vectorlogo.zone/logos/kubernetes/kubernetes-icon.svg" alt="kubernetes icon" height="19"></span> Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cloud/helm/helm.html"><span class="image category-logo"><img src="https://www.vectorlogo.zone/logos/helmsh/helmsh-icon.svg" alt="helmsh icon" height="19"></span> Helm</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../linux/index.html">üñ•Ô∏è Linux</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../linux/coreutils/index.html">Coreutils (file, shell, text manipulation)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../linux/jq.html">Jq: JSON Stream Processor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../linux/sed.html">Sed: Stream Editor</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../asciidoc/index.html">üÖ∞Ô∏è AsciiDoc</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">DEV Cheat Sheets</a></li>
    <li><a href="../../index.html"><span class="image category-logo"><img src="https://cr.openjdk.org/~jeff/Duke/png/Hips.png" alt="Hips" height="19"></span> Java</a></li>
    <li>API</li>
    <li><a href="the-stream-api.html">The Stream API</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/p-marcin/dev-cheat-sheets/blob/main/docs/modules/java/pages/api/the-stream-api/the-stream-api.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">The Stream API</h1>
<div id="preamble">
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="parallelism.html" class="xref page">Parallelism</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mapfilterreduce_algorithm_implementation_in_jdk"><a class="anchor" href="#_mapfilterreduce_algorithm_implementation_in_jdk"></a>Map/Filter/Reduce algorithm implementation in JDK</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Steps of the <strong>Map/Filter/Reduce algorithm</strong>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Map</dt>
<dd>
<p><strong>Changes the type</strong> of the data, <strong>does not change the number</strong> of elements. The mapping step <strong>respects the order</strong> of your objects</p>
</dd>
<dt class="hdlist1">Filter</dt>
<dd>
<p><strong>Does not change the type</strong> of the data, <strong>changes the number</strong> of elements. You may end up with no data</p>
</dd>
<dt class="hdlist1">Reduce</dt>
<dd>
<p>Produces <strong>a result</strong></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If we want to create <strong>an efficient implementation</strong> of the Map/Filter/Reduce algorithm, it <strong>should not duplicate any data</strong>. It should work in the same way, performance wise, as the <strong>iterative pattern</strong>. Map/Filter/Reduce algorithm implemented by the Collection API would cause <strong>duplication of the data</strong> (storing the data in an intermediate structure)</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">The Stream API</dt>
<dd>
<p>Implementation of the Map/Filter/Reduce algorithm that <strong>does not duplicate any data</strong> and that <strong>does not create any load on the CPU or memory</strong></p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Stream by definition is <strong>an empty object</strong> - it does not carry any kind of data
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Every time you call a method on a Stream that returns another Stream, it is going to be <strong>a new Stream object</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Difference between the Stream API and iterative approach is that in the Stream API we <strong>describe the computation and not how this computation should be conducted</strong>. This is none of my business, this is the business of the API</p>
</div>
<div class="paragraph">
<p>Reduce method triggers <strong>the computation of the elements</strong>, and those elements are going to be taken <strong>one-by-one, first mapped, then filtered and computed if they pass the filtering step</strong>. Using Streams is about <strong>creating pipelines of operations</strong>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Intermediate operation (Map/Filter)</dt>
<dd>
<p>Operation that creates a Stream (it does not do anything, it does not process any data)</p>
</dd>
<dt class="hdlist1">Terminal operation (Reduce)</dt>
<dd>
<p>Operation that produces a result (it will trigger the computation of the elements)</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you have a pattern using a Stream that <strong>does not end up with a Terminal operation</strong>, your pattern is not going to process any data. <strong>It will be useless code</strong>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
You are <strong>not allowed</strong> to process <strong>the same Stream twice</strong>. This is why it is completely useless to create intermittent variables to store the Streams. <strong>You should inline it</strong>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_stream_api"><a class="anchor" href="#_the_stream_api"></a>The Stream API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Stream API gives you <strong>4</strong> interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Stream.html" target="_blank" rel="noopener"><code>‚ö™ <strong>Stream&lt;T&gt;</strong></code></a> - a sequence of elements supporting sequential and parallel aggregate operations</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 37.5%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Modifier and Type</th>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;R&gt; Stream&lt;R&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map(Function&lt;? super T,? extends R&gt; mapper)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a stream consisting of the results of applying the given function to the elements of this stream.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IntStream</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mapToInt(ToIntFunction&lt;? super T&gt; mapper)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns an <code>‚ö™ IntStream</code> consisting of the results of applying the given function to the elements of this stream.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;R&gt; Stream&lt;R&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flatMap(Function&lt;? super T,? extends Stream&lt;? extends R&gt;&gt; mapper)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a stream consisting of the results of replacing each element of this stream with the contents of a mapped stream produced by applying the provided mapping function to each element</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">long count = cities.stream() <i class="conum" data-value="1"></i><b>(1)</b>
    .flatMap(city -&gt; city.getPeople().stream()) <i class="conum" data-value="2"></i><b>(2)</b>
    .count(); <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>3 cities</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>With 3 people each</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Returns 9</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Stream&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>filter(Predicate&lt;? super T&gt; predicate)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a stream consisting of the elements of this stream that match the given predicate.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reduce(BinaryOperator&lt;T&gt; accumulator)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Performs a reduction on the elements of this stream, using an associative accumulation function, and returns an <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/Optional.html" target="_blank" rel="noopener"><code>üî¥ Optional&lt;T&gt;</code></a> describing the reduced value, if any. See <a href="#_reducing_data_to_compute_statistics">Reducing Data to compute Statistics</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reduce(T identity, BinaryOperator&lt;T&gt; accumulator)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Performs a reduction on the elements of this stream, using the provided identity value and an associative accumulation function, and returns the reduced value. See <a href="#_reducing_data_to_compute_statistics">Reducing Data to compute Statistics</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;R, A&gt; R</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collect(Collector&lt;? super T,A,R&gt; collector)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Performs a mutable reduction operation on the elements of this stream using a <code>‚ö™ Collector&lt;T,A,R&gt;</code>. See <a href="#_the_collectors_api">The Collectors API</a> and <a href="#_collecting_data_from_streams_to_create_listssetsmaps">Collecting Data from Streams to create Lists/Sets/Maps</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Stream&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>distinct()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a stream consisting of the distinct elements (according to <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" target="_blank" rel="noopener"><code>üü¢ Object#equals(Object obj)</code></a>) of this stream.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Stream&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sorted()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a stream consisting of the elements of this stream, sorted according to natural order.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>long</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>count()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns the count of elements in this stream.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min(Comparator&lt;? super T&gt; comparator)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns the minimum element of this stream according to the provided <code>‚ö™ Comparator&lt;T&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max(Comparator&lt;? super T&gt; comparator)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns the maximum element of this stream according to the provided <code>‚ö™ Comparator&lt;T&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toArray()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns an array containing the elements of this stream.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;A&gt; A[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toArray(IntFunction&lt;A[]&gt; generator)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns an array containing the elements of this stream, using the provided generator function to allocate the returned array, as well as any additional arrays that might be required for a partitioned execution or for resizing. For example <code>toArray(String[]::new)</code> will return <code>String[]</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/IntStream.html" target="_blank" rel="noopener"><code>‚ö™ <strong>IntStream</strong></code></a> - <code>int</code> primitive specialization of <code>‚ö™ Stream&lt;T&gt;</code></p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 37.5%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Modifier and Type</th>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OptionalInt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns an <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/OptionalInt.html" target="_blank" rel="noopener"><code>üî¥ OptionalInt</code></a> describing the minimum element of this stream, or an empty optional if this stream is empty.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OptionalInt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns an <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/OptionalInt.html" target="_blank" rel="noopener"><code>üî¥ OptionalInt</code></a> describing the maximum element of this stream, or an empty optional if this stream is empty.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OptionalDouble</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>average()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns an <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/OptionalDouble.html" target="_blank" rel="noopener"><code>üî¥ OptionalDouble</code></a> describing the arithmetic mean of elements of this stream, or an empty optional if this stream is empty.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sum()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns the sum of elements in this stream.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IntSummaryStatistics</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>summaryStatistics()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns an <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/IntSummaryStatistics.html" target="_blank" rel="noopener"><code>üü¢ IntSummaryStatistics</code></a> describing various summary data about the elements of this stream.</p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/LongStream.html" target="_blank" rel="noopener"><code>‚ö™ <strong>LongStream</strong></code></a> - <code>long</code> primitive specialization of <code>‚ö™ Stream&lt;T&gt;</code>. It has similar methods to <code>‚ö™ IntStream</code></p>
</li>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/DoubleStream.html" target="_blank" rel="noopener"><code>‚ö™ <strong>DoubleStream</strong></code></a> - <code>double</code> primitive specialization of <code>‚ö™ Stream&lt;T&gt;</code>. It has similar methods to <code>‚ö™ IntStream</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_collectors_api"><a class="anchor" href="#_the_collectors_api"></a>The Collectors API</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Collectors.html" target="_blank" rel="noopener"><code>üî¥ Collectors</code></a> - implementations of <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Collector.html" target="_blank" rel="noopener"><code>‚ö™ Collector&lt;T,A,R&gt;</code></a> that implement various useful reduction operations, such as accumulating elements into collections, summarizing elements according to various criteria, etc.</p>
</div>
<div class="paragraph">
<p>Type parameters of <code>‚ö™ Collector&lt;T,A,R&gt;</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>T</code> - the type of input elements to the reduction operation</p>
</li>
<li>
<p><code>A</code> - the mutable accumulation type of the reduction operation (often hidden as an implementation detail)</p>
</li>
<li>
<p><code>R</code> - the result type of the reduction operation</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 37.5%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Modifier and Type</th>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toList()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> that accumulates the input elements into a new <code>‚ö™ List&lt;T&gt;</code>, in encounter order.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toUnmodifiableList()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> that accumulates the input elements into an unmodifiable <code>‚ö™ List&lt;T&gt;</code>, in encounter order.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static &lt;T&gt; Collector&lt;T,?,Set&lt;T&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toSet()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> that accumulates the input elements into a new <code>‚ö™ Set&lt;T&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static &lt;T&gt; Collector&lt;T,?,Set&lt;T&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toUnmodifiableSet()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> that accumulates the input elements into an unmodifiable <code>‚ö™ Set&lt;T&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static &lt;T, C extends Collection&lt;T&gt;&gt; Collector&lt;T,?,C&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toCollection(Supplier&lt;C&gt; collectionFactory)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> that accumulates the input elements into a new <code>‚ö™ Collection&lt;T&gt;</code>, in encounter order. For example <code>toCollection(MyCollection::new)</code> will return <code>üü¢ MyCollection</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static Collector&lt;CharSequence,?,String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>joining()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> that concatenates the input elements into a <code>üî¥ String</code>, in encounter order. The string won&#8217;t be delimited.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static Collector&lt;CharSequence,?,String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>joining(CharSequence delimiter)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> that concatenates the input elements, separated by the specified delimiter, in encounter order.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static Collector&lt;CharSequence,?,String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>joining(CharSequence delimiter, CharSequence prefix, CharSequence suffix)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> that concatenates the input elements, separated by the specified delimiter, with the specified prefix and suffix, in encounter order.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static &lt;T, K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupingBy(Function&lt;? super T,? extends K&gt; classifier)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> implementing a "group by" operation on input elements of type <code>T</code>, grouping elements according to a classification function, and returning the results in a <code>‚ö™ Map</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static &lt;T, K, A, D&gt; Collector&lt;T,?,Map&lt;K,D&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupingBy(Function&lt;? super T,? extends K&gt; classifier, Collector&lt;? super T,A,D&gt; downstream)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> implementing a cascaded "group by" operation on input elements of type <code>T</code>, grouping elements according to a classification function, and then performing a reduction operation on the values associated with a given key using the specified downstream <code>‚ö™ Collector&lt;T,A,R&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static &lt;T&gt; Collector&lt;T,?,Long&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>counting()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> accepting elements of type <code>T</code> that counts the number of input elements.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static &lt;T&gt; Collector&lt;T,?,Integer&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>summingInt(ToIntFunction&lt;? super T&gt; mapper)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>‚ö™ Collector&lt;T,A,R&gt;</code> that produces the sum of an integer-valued function applied to the input elements. For example <code>summingInt(City::getPopulation)</code> will return population of all cities.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_building_a_stream_from_data_in_memory"><a class="anchor" href="#_building_a_stream_from_data_in_memory"></a>Building a Stream from Data in Memory</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Creating a Stream from <strong>Arrays</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>üî¥ <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/Arrays.html#stream(T%5B%5D)" target="_blank" rel="noopener"><code>Arrays#stream(T[] array)</code></a> - returns a sequential <code>Stream&lt;T&gt;</code> with the specified array as its source</p>
</li>
<li>
<p>‚ö™ <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Stream.html#of(T%2E%2E%2E)" target="_blank" rel="noopener"><code>Stream&lt;T&gt;#of(T&#8230;&#8203; values)</code></a> - returns a sequential ordered stream whose elements are the specified values</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Stream&lt;String&gt; streamOfStrings = Stream.&lt;String&gt;of("abcd", "efgh");</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Creating a Stream from <strong>a Text File</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>üî¥ <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/nio/file/Files.html#lines(java.nio.file.Path)" target="_blank" rel="noopener"><code>Files#lines(Path path)</code></a> - read all lines from a file as a <code>Stream&lt;String&gt;</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Path path = Path.of("src/main/resources/first-names.txt"); <i class="conum" data-value="1"></i><b>(1)</b>
try (Stream&lt;String&gt; lines = Files.lines(path)) {
    long count = lines.count(); <i class="conum" data-value="2"></i><b>(2)</b>
} catch (IOException e) {
    e.printStackTrace();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>File with 200 lines</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Returns 200</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Creating a Stream from <strong>a RegEx</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>üî¥ <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener"><code>Pattern#splitAsStream(CharSequence input)</code></a> - creates a <code>Stream&lt;String&gt;</code> from the given input sequence around matches of this pattern.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String sentence = "the quick brown fox jumps over the lazy dog";

<i class="conum" data-value="1"></i><b>(1)</b>
String[] words = sentence.split(" ");
long count1 = Arrays.stream(words).count(); <i class="conum" data-value="3"></i><b>(3)</b>

<i class="conum" data-value="2"></i><b>(2)</b>
long count2 = Pattern.compile(" ").splitAsStream(sentence).count(); <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>Bad Practice:</strong> we create an array and store it in memory</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>Best Practice:</strong> we do not create an array when we create a <code>‚ö™ Stream&lt;T&gt;</code> from <code>üî¥ Pattern</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Returns 9</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Creating an <code>‚ö™ IntStream</code> <strong>(Stream of ASCII Codes)</strong> from a String:</p>
<div class="ulist">
<ul>
<li>
<p>üî¥ <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/String.html" target="_blank" rel="noopener"><code>String#chars()</code></a> - Returns an <code>‚ö™ IntStream</code> of int zero-extending the char values from this sequence.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String sentence = "the quick brown fox jumps over the lazy dog";
sentence.chars()
    .mapToObj(codePoint -&gt; Character.toString(codePoint)) <i class="conum" data-value="1"></i><b>(1)</b>
    .filter(letter -&gt; !letter.equals(" "))
    .distinct().sorted().forEach(System.out::print);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Converts <code>‚ö™ IntStream</code> to <code>‚ö™ Stream&lt;String&gt;</code></td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Selecting</strong> elements of a Stream:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">IntStream.range(0, 30)
    .skip(10) <i class="conum" data-value="1"></i><b>(1)</b>
    .limit(10) <i class="conum" data-value="2"></i><b>(2)</b>
    .forEach(index -&gt; System.out.print(index + " ")); <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Skip first 10 elements</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Take next 10 elements after skip</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Prints "10 11 12 13 14 15 16 17 18 19"</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Closing</strong> a <code>‚ö™ Stream&lt;T&gt;</code> with a <code>‚ö™ Predicate&lt;? super T&gt;</code>:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Stream.html#takeWhile(java.util.function.Predicate)" target="_blank" rel="noopener"><code>takeWhile</code></a> - consume elements of the <code>‚ö™ Stream&lt;T&gt;</code> until <code>‚ö™ Predicate&lt;? super T&gt;</code> is <strong>true</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Stream.&lt;Class&lt;?&gt;&gt;iterate(ArrayList.class, c -&gt; c.getSuperclass())
    .takeWhile(c -&gt; c != null)
    .forEach(System.out::println);
// Prints:
class java.util.ArrayList
class java.util.AbstractList
class java.util.AbstractCollection
class java.lang.Object</code></pre>
</div>
</div>
</li>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Stream.html#dropWhile(java.util.function.Predicate)" target="_blank" rel="noopener"><code>dropWhile</code></a> - consume remaining elements of the <code>‚ö™ Stream&lt;T&gt;</code> after <code>‚ö™ Predicate&lt;? super T&gt;</code> becomes <strong>false</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Stream.&lt;Class&lt;?&gt;&gt;iterate(ArrayList.class, c -&gt; c.getSuperclass())
    .dropWhile(c -&gt; !c.equals(AbstractCollection.class))
    .forEach(System.out::println);
// Prints
class java.util.AbstractCollection
class java.lang.Object
null
Exception in thread "main" java.lang.NullPointerException: Cannot invoke "java.lang.Class.getSuperclass()" because "c" is null</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_converting_a_for_loop_to_a_stream"><a class="anchor" href="#_converting_a_for_loop_to_a_stream"></a>Converting a For Loop to a Stream</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>The following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">int sum = 0;
int count = 0;
for (Person person : people) {
    if (person.getAge() &gt; 20) {
        count++;
        sum += person.getAge();
    }
}
double average = 0d;
if (count &gt; 0) {
    average = sum / count;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>can be converted into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">double average = people.stream()
    .mapToInt(Person::getAge)
    .filter(age -&gt; age &gt; 20)
    .average().orElseThrow();</code></pre>
</div>
</div>
</li>
<li>
<p>The Stream API <strong>always computes one thing</strong>. Never sacrifice the <strong>readability</strong> of your code to the <strong>performance</strong>. The performance here is measured in <strong>nanoseconds</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">double totalAmount = 0;
int frequentRenterPoints = 0;
String statement = composeHeader();
for (Rental rental : rentals) {
    totalAmount += computeRentalAmount(rental);
    frequentRenterPoints += getFrequentRenterPoints(rental);
    statement += computeStatementLine(rental);
}
statement += composeFooter(totalAmount, frequentRenterPoints);</code></pre>
</div>
</div>
<div class="paragraph">
<p>can be converted into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">double totalAmount = rentals.stream()
    .mapToDouble(this::computeRentalAmount)
    .sum();
int frequentRenterPoints = rentals.stream()
    .mapToInt(this::getFrequentRenterPoints)
    .sum();
String statement = composeHeader();
statement += rentals.stream()
    .map(this::computeStatementLine)
    .collect(Collectors.joining());
statement += composeFooter(totalAmount, frequentRenterPoints);</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Forget about <strong>processing your data in one pass</strong> (unless you are doing <strong>an SQL request</strong>). Most of the time when you have a for loop or when you have a <code>‚ö™ Stream&lt;T&gt;</code>, the JVM will optimize that for you and get rid of your for loop, get rid of your iteration, and you will have a zero pass of your data, just inline code, <strong>extremely performant, and extremely efficient</strong>. See
<a href="https://colinchjava.github.io/2023-10-25/08-46-54-893363-fine-grained-optimizations-provided-by-jit-compiler-in-java/" target="_blank" rel="noopener">Fine-grained optimizations provided by JIT Compiler in Java</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reducing_data_to_compute_statistics"><a class="anchor" href="#_reducing_data_to_compute_statistics"></a>Reducing Data to compute Statistics</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Stream.html#reduce(java.lang.Object,java.util.function.BinaryOperator)" target="_blank" rel="noopener"><code>‚ö™ Stream&lt;T&gt;#reduce(T identity, BinaryOperator&lt;T&gt; accumulator)</code></a> adds the Identity Element before the elements of the <code>‚ö™ Stream&lt;T&gt;</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you have an empty <code>‚ö™ Stream&lt;T&gt;</code>, it will <strong>return Identity Element</strong></p>
</li>
<li>
<p>If you have only one element in the <code>‚ö™ Stream&lt;T&gt;</code>, it will <strong>return the reduction of the Identity Element and this only element</strong>:</p>
<div class="paragraph">
<p><span class="image"><img src="../../_images/the-stream-api/stream-reduce.png" alt="stream reduce" width="500"></span></p>
</div>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Some reduction operations <strong>do not have any Identity Element</strong> (in case for the <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/IntStream.html#min()" target="_blank" rel="noopener"><code>‚ö™ IntStream#min()</code></a>, the <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/IntStream.html#max()" target="_blank" rel="noopener"><code>‚ö™ IntStream#max()</code></a>, the <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/IntStream.html#average()" target="_blank" rel="noopener"><code>‚ö™ IntStream#average()</code></a> and <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Stream.html#reduce(java.util.function.BinaryOperator)" target="_blank" rel="noopener"><code>‚ö™ Stream&lt;T&gt;#reduce(BinaryOperator&lt;T&gt; accumulator)</code></a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<code>üî¥ Optional&lt;T&gt;</code> are used by the Stream API, because in cases where we have an empty <code>‚ö™ Stream&lt;T&gt;</code> without any Identity Element <strong>we don&#8217;t have any result</strong>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_collecting_data_from_streams_to_create_listssetsmaps"><a class="anchor" href="#_collecting_data_from_streams_to_create_listssetsmaps"></a>Collecting Data from Streams to create Lists/Sets/Maps</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Collector</dt>
<dd>
<p>Complex object <strong>used to reduce a Stream</strong>. Can be used to gather data in <strong>collections</strong> and <strong>maps</strong> - it is called as <strong>reduction in a "mutable container"</strong> or <strong>mutable reduction</strong></p>
</dd>
<dt class="hdlist1">Downstream Collector</dt>
<dd>
<p>Collector that is passed to <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)" target="_blank" rel="noopener"><code>üî¥ Collectors#groupingBy(Function&lt;? super T,? extends K&gt; classifier, Collector&lt;? super T,A,D&gt; downstream)</code></a> which is applied to the streaming of the list of values</p>
</dd>
<dt class="hdlist1">The Collector API</dt>
<dd>
<p>Uses the <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.stream.Collector)" target="_blank" rel="noopener"><code>‚ö™ Stream#collect(Collector&lt;? super T,A,R&gt; collector)</code></a> that takes <code>‚ö™ Collector&lt;T,A,R&gt;</code> implementation as a parameter:</p>
<div class="ulist">
<ul>
<li>
<p>Use <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/stream/Collectors.html" target="_blank" rel="noopener"><code>üî¥ Collectors</code></a> class and its factory methods</p>
</li>
<li>
<p>You can create your own collectors, but it is complex and tricky</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Bad Practice
List&lt;Person&gt; people = new ArrayList&lt;&gt;();
List&lt;Person&gt; peopleFromNewYork = new ArrayList&lt;&gt;(); <i class="conum" data-value="1"></i><b>(1)</b>
people.stream()
    .filter(p -&gt; p.getCity().equals("New York"))
    .forEach(p -&gt; peopleFromNewYork.add(p));

// Best Practice
List&lt;Person&gt; people = new ArrayList&lt;&gt;();
List&lt;Person&gt; peopleFromNewYork = people.stream()
    .filter(p -&gt; p.getCity().equals("New York"))
    .collect(Collectors.toList()); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Creating a <code>‚ö™ List&lt;E&gt;</code> to store the result</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Using <code>‚ö™ Collector&lt;T,A,R&gt;</code> to store the result in <code>‚ö™ List&lt;E&gt;</code></td>
</tr>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script src="../../../../_/js/docsearch.js"></script>
  </body>
</html>
